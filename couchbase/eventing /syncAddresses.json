[{"appcode":"function OnUpdate(doc, meta) {\n     \n    var id = meta.id;\n\n    if(doc.op !== 'd'){\n        var payload=doc.after;\n       var time = doc.ts_ms;\n      var source= doc.source;\n        tgt[id]=updateMeta(payload, time,source);\n        \n    }else{\n       var idsrc=doc.before.id;\n       delete tgt[idsrc];\n       delete src[meta.id];\n        log('OnUpdate: removed Addresse:', idsrc);\n    }\n}\nfunction updateMeta(payload,time,source) {\n    let metadoc = payload.metadoc;\n    \n   \n    if (metadoc == null) {\n        metadoc =  {\"table\": source.table,  \"db\": source.db, \"snapshot\":source.snapshot, \"connector\":source.connector, \"time\": time};\n    }\n        payload.metadoc = metadoc;\n    return payload;\n}\n\n\n","depcfg":{"buckets":[{"alias":"src","bucket_name":"retailsample","scope_name":"staging","collection_name":"addresses","access":"rw"},{"alias":"tgt","bucket_name":"retailsample","scope_name":"inventory","collection_name":"addresses","access":"rw"}],"source_bucket":"retailsample","source_scope":"staging","source_collection":"addresses","metadata_bucket":"retailsample","metadata_scope":"eventing","metadata_collection":"events"},"version":"evt-7.0.3-7031-ee","enforce_schema":false,"handleruuid":526613333,"function_instance_id":"4JHuH1","appname":"syncAddresses","settings":{"cluster_stats":null,"dcp_stream_boundary":"everything","deployment_status":false,"description":"","execution_timeout":60,"language_compatibility":"6.6.2","log_level":"INFO","n1ql_consistency":"none","num_timer_partitions":128,"processing_status":false,"timer_context_size":1024,"user_prefix":"eventing","worker_count":1}}]